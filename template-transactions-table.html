
<style>
  md-toolbar.md-table-toolbar.alternate {
    color: #1e88e5;
    background-color: #e3f2fd;
  }
  md-toolbar.md-table-toolbar {
    background-color: #f5f5f5 !important;
  }

  md-toolbar.md-table-toolbar.alternate .md-toolbar-tools {
    font-size: 16px;
  }
  /* override the default styles from md-data-table.css:
     The default style pads the first column in the table
     differently than the others - override this behaviour
  */
  table.md-table.md-row-select td.md-cell:first-child,
  table.md-table.md-row-select th.md-column:first-child {
    width: 20px;
    padding: 0 0 0 16px;
  }
  table.md-table.md-row-select td.md-cell:nth-child(2),
  table.md-table.md-row-select th.md-column:nth-child(2) {
    padding: 0 16px;
  }
  table.md-table.md-row-select td.md-cell:nth-child(n+3):nth-last-child(n+2),
  table.md-table.md-row-select th.md-column:nth-child(n+3):nth-last-child(n+2) {
    padding: 0 16px;
  }
  table.md-table:not(.md-row-select) td.md-cell:first-child,
  table.md-table:not(.md-row-select) th.md-column:first-child {
    padding: 0 16px;
  }
  table.md-table:not(.md-row-select) td.md-cell:nth-child(n+2):nth-last-child(n+2),
  table.md-table:not(.md-row-select) th.md-column:nth-child(n+2):nth-last-child(n+2) {
    padding: 0 16px;
  }
  table.md-table td.md-cell:last-child,
  table.md-table th.md-column:last-child {
    padding: 0 16px;
  }
  md-toolbar.md-table-toolbar .md-toolbar-tools {
    height: auto;
    max-height: none;
  }
  .md-table-pagination {
    border-top: 0px none black;
  }
  .transaction-positive {
    color: #3d9400 !important;
  }
  .transaction-negative {
    color: #cc2914 !important;
  }
</style>

<div ng-controller="TransactionsTableCtrl">
  <div>
    <md-input-container style="max-width: 240px; margin-left: 24px; margin-top: 24px">
      <label>Sort by</label>
      <md-select ng-model="query.order">
        <md-option ng-repeat="option in [['date', 'Date (oldest first)'], ['-date', 'Date (newest first)'], ['category', 'Category'], ['amount', 'Amount (increasing)'], ['-amount', 'Amount (decreasing)']]" value="{{option[0]}}">
          {{option[1]}}
        </md-option>
      </md-select>
    </md-input-container>
    <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="{{transactions.length}}" md-page-select="options.pageSelector" md-boundary-links="options.boundaryLinks" md-on-paginate="logPagination" md-options="[10, 50, 100]" style="float: right">
    </md-table-pagination>
    <div style="clear: both"></div>
  </div>

  <div>
    <div ng-repeat="transaction in transactions | orderBy: query.order | limitTo: query.limit : (query.page-1)*query.limit" style="padding: 8px; display: flex; align-items: center">
      <div style="display:flex; flex-grow:1; align-items: center">
        <md-button aria-label="" class="md-icon-button" ng-click="$mdOpenMenu($event)" style="background-color: #3f51b5; color: white; font-size: 24px; font-weight: normal; width: 42px; margin-right: 16px; flex-shrink: 0">
          {{transaction.category | limitTo: 1}}
        </md-button>
        <div style="display: flex; flex-grow: 1; flex-wrap: wrap">
          <div style="width: 120px; flex-grow: 1; font-size: 16px">{{transaction.category}}</div>
          <div style="width: 120px; flex-grow: 3; overflow: hidden; max-height: 1.2em; whitespace: nowrap; text-overflow: ellipsis">
            {{transaction.details}}
          </div>
        </div>
      </div>
      <div style="display: flex; flex-wrap: wrap; flex-grow: 1; justify-content: flex-end">
        <div style="text-align: right; width: 96px; flex-grow: 1">{{transaction.date | date:'yyyy-MM-dd'}}</div>
        <div style="text-align: right; width: 96px; flex-grow: 1; font-size: 16px" ng-class="{'transaction-positive': transaction.amount>0, 'transaction-negative': transaction.amount<0}">{{transaction.amount | number: 2}}</div>
      </div>
    </div>
  </div>
</div>
